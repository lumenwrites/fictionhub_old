{% load staticfiles %}

<!-- Sprint warning -->
<div class="alert-box panel" id="sprint-popup" data-alert style="display:none;">
  <h4>Sprints</h4>
  <p> Sprints are a great tool that will help you to focus and achieve the state of flow. They are easy to start with(100 words is not a difficult challenge), and very satisfying to complete. You can forget about editing, stop censoring yourself, get out of your head, and just improvise.</p>

  <p> Your healthbar goes down when you stop typing, and refills as you write.
    If it reaches zero - you "die" and <b>lose everything you wrote</b>.</p>

  <p>Your progress bar fills up as you write, and <b>when you reach 100 words - you win!</b></p>


  <p>Once you've completed your first sprint, the first writing goal is automatically marked as complete. You can pause, rest, improve what you have written, and move on to the next one.</p>

    
<a href="#" class="close" style="font-size: 41px; top: 20px;">&times;</a>  
</div>


<script src="{% static "js/js.cookie.js" %}" type="text/javascript"></script>

<script>
$(document).ready(function() {

$(window).on('close.fndtn.alert', function(event) {
Cookies.set('sprint_closed', 'yes', { expires: 300 });	    
});

	
    if (Cookies.get('sprint_closed')==null) {
	// Cookies.set('name', 'value', { expires: 7 });
        $('#sprint-popup').css("display","block");
    }
});
</script>





<!-- <span id="stop">Stop</span><br/> -->
<!-- <span id="more">More</span><br/>          -->

<div style="//margin-top:-1px;">
  <span class="button small start"
	style="width:80px;padding:10px;height:35px;background:#3D455B;">Sprint</span>
  <div style="width: calc(100% - 80px); float:right;">      
    <div class="progress" style="margin: 0px;
				 border: 1px solid #7C868E;
				 float:right;
				 width:50%;
				 height:35px;">
      <span class="meter sprintprogress" style="width:0%; max-width:100%;">
	<i class="fi-text-color"  style="margin-left: 4px;
					 margin-top: 7px;"></i>
	<style>
	  .fi-text-color:before {
	  margin-top: 7px;
	  }
	</style>
      </span>
    </div>      

    <div class="progress" style="margin: 0px;
				 border: 1px solid #7C868E;
				 float:left;
				 width:50%;
				 height:35px;">
      <span class="meter health" style="width:100%; max-width:100%;">
	<i class="fa fa-heart-o" style="margin-left: 4px;
					margin-top: 7px;"></i>	
      </span>
    </div>
  </div>
  </div>


  

  


  <script>
var health = 10;
var healthTimer = "";
var currentSprint = "";
var wordsBeforeSprint = 0;
var sprint = false;
function startTimer() {
    healthTimer = setInterval(function () {
	//display.text(timer);
	$(".health").css("width",(health/10)*100+"%");

	health = health - 0.1/5;
	$(".sprintprogress").css("width",sprintpercent+"%")
	console.log("words:" + sprintpercent);

	if (health > 8) {
	$(".health").css("background","green");	
	} else if (health > 4) {
	    $(".health").css("background","#008CBA");
	} else {
	    $(".health").css("background","red");	    
	}

	
        if (health < -0.5) {
	    simplemde.value("");
            console.log("Lost");
	    health = 0;
wordsBeforeSprint = 0;
	    //$(".start").removeClass("disabled");
        }
    }, 10);
}

$(".start").click(function(){
    id = $(this).parent().parent().attr('id');
    currentSprint = id;
    $(".health").css("width","100%");
    $(".sprintprogress").css("width","0");
    wordsBeforeSprint = parseInt(words);
    sprintpercent = 0;		     
    $(".start").addClass("disabled");
    startTimer(5);
    sprint = true;

});

$("#stop").click(function(){
    clearTimeout(healthTimer);
});

$("#more").click(function(){
    health=health + 1;
});
    

    
  </script>
  <style>
    .disabled {
    background: #848C96;
    }
  </style>
